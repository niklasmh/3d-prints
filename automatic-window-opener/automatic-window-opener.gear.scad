// Generated by SolidPython 1.1.3 on 2025-03-09 02:48:33
$fn = 64;


difference() {
	linear_extrude(height = 13, slices = 1, twist = -7.594643368591445) {
		polygon(points = [[22.5, 0.0], [22.415341065327294, 0.378637462806787], [22.169743822900962, 0.7491914939374684], [21.787179882375174, 1.104920710189909], [21.303895724438366, 1.441509245485037], [20.763467316603133, 1.7576848191183598], [20.211000561583514, 2.055257876010524], [19.687376909516843, 2.3385846228618474], [19.224421894018707, 2.613573046688757], [18.841710342190282, 2.8864438558941576], [18.545443606454974, 3.162508801932647], [18.329488271805218, 3.4452262454452365], [18.17831024735917, 3.735737721122576], [18.07123202182097, 4.032989845661785], [17.98723455715507, 4.334422233481712], [17.909452182534345, 4.6370784449241], [17.82857978039945, 4.93889835862166], [17.74461318706648, 5.2398975136542845], [17.666640931410672, 5.542944351362693], [17.610747332649314, 5.853911355311648], [17.596415604474863, 6.18109068556215], [17.64207968860803, 6.533908841061924], [17.76062173503185, 6.92112146529329], [17.955624256634334, 7.3487902939305965], [18.21906084895168, 7.81841476246041], [18.530868860238144, 8.325594748838594], [18.860532576385403, 8.859533953098808], [19.170469519680832, 9.403564235839001], [19.420711610053115, 9.936700536995582], [19.574157092994106, 10.436053045401417], [19.601573528469373, 10.87976087104848], [19.48557158514987, 11.249999999999998], [19.48557158514987, 11.249999999999998], [19.222936065662584, 11.535580194278808], [18.82496559905664, 11.733690777499543], [18.315790899863206, 11.85047934537959], [17.728960274195796, 11.900331488599361], [17.102847757267043, 11.903933363504324], [16.475610984227618, 11.885405812744919], [15.880476226089835, 11.868962147056433], [15.342051209945577, 11.87563160008811], [14.874177879137696, 11.920588876896991], [14.479570886675385, 12.011534765393048], [14.151189359029628, 12.148397586243064], [13.875009611526737, 12.324398892047526], [13.63365108574889, 12.52828767045827], [13.41019095358477, 12.747337043500782], [13.191501335475353, 12.970553823912683], [12.970553823912685, 13.191501335475351], [12.747337043500783, 13.410190953584767], [12.528287670458274, 13.633651085748886], [12.324398892047528, 13.875009611526735], [12.148397586243068, 14.151189359029626], [12.011534765393051, 14.47957088667538], [11.920588876896993, 14.874177879137694], [11.875631600088111, 15.342051209945573], [11.868962147056434, 15.880476226089833], [11.88540581274492, 16.475610984227615], [11.903933363504324, 17.10284775726704], [11.900331488599365, 17.728960274195796], [11.850479345379593, 18.315790899863202], [11.733690777499548, 18.824965599056636], [11.535580194278811, 19.222936065662584], [11.250000000000002, 19.48557158514987], [11.250000000000002, 19.48557158514987], [10.879760871048488, 19.60157352846937], [10.43605304540142, 19.574157092994106], [9.936700536995586, 19.42071161005311], [9.403564235839006, 19.17046951968083], [8.859533953098817, 18.8605325763854], [8.325594748838599, 18.53086886023814], [7.8184147624604154, 18.21906084895168], [7.348790293930602, 17.95562425663433], [6.921121465293298, 17.76062173503185], [6.533908841061925, 17.642079688608028], [6.181090685562152, 17.596415604474863], [5.85391135531165, 17.610747332649314], [5.542944351362695, 17.666640931410672], [5.239897513654286, 17.74461318706648], [4.938898358621664, 17.82857978039945], [4.637078444924105, 17.909452182534345], [4.334422233481715, 17.987234557155066], [4.032989845661789, 18.071232021820965], [3.7357377211225815, 18.17831024735917], [3.4452262454452427, 18.329488271805214], [3.1625088019326504, 18.545443606454974], [2.886443855894159, 18.841710342190282], [2.6135730466887592, 19.224421894018707], [2.338584622861847, 19.687376909516843], [2.055257876010525, 20.211000561583514], [1.7576848191183623, 20.76346731660313], [1.4415092454850411, 21.303895724438366], [1.1049207101899103, 21.787179882375174], [0.7491914939374713, 22.169743822900962], [0.3786374628067917, 22.415341065327294], [1.3777276490407724e-15, 22.5], [1.3777276490407724e-15, 22.5], [-0.378637462806784, 22.415341065327294], [-0.7491914939374636, 22.169743822900962], [-1.1049207101899028, 21.787179882375177], [-1.4415092454850336, 21.303895724438366], [-1.7576848191183552, 20.763467316603133], [-2.055257876010518, 20.211000561583514], [-2.3385846228618403, 19.687376909516846], [-2.6135730466887526, 19.224421894018707], [-2.8864438558941528, 18.841710342190286], [-3.162508801932644, 18.545443606454974], [-3.4452262454452365, 18.329488271805218], [-3.7357377211225753, 18.17831024735917], [-4.032989845661782, 18.07123202182097], [-4.334422233481709, 17.98723455715507], [-4.637078444924099, 17.909452182534345], [-4.938898358621658, 17.828579780399455], [-5.23989751365428, 17.744613187066484], [-5.542944351362689, 17.666640931410676], [-5.853911355311644, 17.610747332649314], [-6.181090685562148, 17.596415604474867], [-6.533908841061919, 17.64207968860803], [-6.921121465293291, 17.76062173503185], [-7.3487902939305965, 17.955624256634334], [-7.818414762460408, 18.219060848951685], [-8.325594748838592, 18.530868860238144], [-8.859533953098804, 18.860532576385403], [-9.403564235838996, 19.170469519680832], [-9.936700536995582, 19.420711610053115], [-10.436053045401417, 19.57415709299411], [-10.87976087104848, 19.601573528469373], [-11.249999999999995, 19.48557158514987], [-11.249999999999995, 19.48557158514987], [-11.535580194278804, 19.222936065662587], [-11.733690777499538, 18.824965599056643], [-11.850479345379583, 18.31579089986321], [-11.900331488599361, 17.728960274195796], [-11.903933363504319, 17.102847757267046], [-11.885405812744917, 16.47561098422762], [-11.868962147056427, 15.88047622608984], [-11.875631600088104, 15.34205120994558], [-11.920588876896984, 14.874177879137699], [-12.011534765393042, 14.479570886675388], [-12.148397586243055, 14.151189359029635], [-12.324398892047522, 13.87500961152674], [-12.528287670458266, 13.633651085748891], [-12.747337043500774, 13.410190953584774], [-12.970553823912683, 13.191501335475351], [-13.191501335475344, 12.97055382391269], [-13.410190953584765, 12.747337043500785], [-13.633651085748879, 12.528287670458283], [-13.875009611526737, 12.324398892047524], [-14.151189359029628, 12.148397586243066], [-14.479570886675383, 12.01153476539305], [-14.874177879137694, 11.920588876896995], [-15.342051209945572, 11.875631600088113], [-15.880476226089831, 11.868962147056438], [-16.475610984227615, 11.885405812744926], [-17.10284775726704, 11.903933363504322], [-17.728960274195792, 11.900331488599365], [-18.315790899863202, 11.850479345379595], [-18.824965599056636, 11.733690777499548], [-19.22293606566258, 11.535580194278817], [-19.485571585149867, 11.250000000000007], [-19.485571585149867, 11.250000000000007], [-19.601573528469366, 10.879760871048493], [-19.574157092994106, 10.43605304540142], [-19.42071161005311, 9.936700536995586], [-19.17046951968083, 9.403564235839008], [-18.8605325763854, 8.859533953098817], [-18.53086886023814, 8.325594748838604], [-18.219060848951678, 7.818414762460421], [-17.95562425663433, 7.348790293930607], [-17.760621735031847, 6.921121465293302], [-17.642079688608028, 6.533908841061931], [-17.596415604474863, 6.1810906855621575], [-17.610747332649314, 5.853911355311656], [-17.66664093141067, 5.542944351362704], [-17.744613187066477, 5.239897513654295], [-17.82857978039945, 4.938898358621665], [-17.90945218253434, 4.637078444924114], [-17.98723455715507, 4.334422233481711], [-18.071232021820965, 4.032989845661794], [-18.17831024735917, 3.735737721122579], [-18.329488271805214, 3.4452262454452396], [-18.545443606454974, 3.1625088019326513], [-18.841710342190282, 2.8864438558941643], [-19.224421894018707, 2.6135730466887646], [-19.687376909516843, 2.3385846228618483], [-20.211000561583514, 2.0552578760105265], [-20.76346731660313, 1.7576848191183636], [-21.303895724438366, 1.4415092454850424], [-21.787179882375174, 1.1049207101899163], [-22.169743822900962, 0.7491914939374776], [-22.415341065327294, 0.37863746280679805], [-22.5, 2.7554552980815448e-15], [-22.5, 2.7554552980815448e-15], [-22.415341065327294, -0.3786374628067826], [-22.169743822900962, -0.7491914939374622], [-21.787179882375177, -1.1049207101899015], [-21.303895724438366, -1.4415092454850278], [-20.763467316603133, -1.7576848191183494], [-20.211000561583514, -2.0552578760105122], [-19.687376909516846, -2.338584622861835], [-19.224421894018707, -2.6135730466887517], [-18.841710342190286, -2.886443855894151], [-18.545443606454974, -3.162508801932639], [-18.329488271805218, -3.445226245445227], [-18.178310247359175, -3.735737721122566], [-18.07123202182097, -4.032989845661773], [-17.98723455715507, -4.334422233481699], [-17.909452182534345, -4.637078444924102], [-17.828579780399455, -4.938898358621652], [-17.74461318706648, -5.239897513654283], [-17.666640931410676, -5.542944351362684], [-17.610747332649318, -5.853911355311643], [-17.596415604474867, -6.181090685562145], [-17.64207968860803, -6.533908841061918], [-17.760621735031854, -6.92112146529329], [-17.955624256634334, -7.348790293930596], [-18.219060848951685, -7.8184147624604075], [-18.530868860238144, -8.32559474883859], [-18.860532576385406, -8.859533953098802], [-19.170469519680832, -9.403564235838994], [-19.420711610053118, -9.936700536995573], [-19.574157092994113, -10.436053045401408], [-19.601573528469373, -10.879760871048479], [-19.485571585149874, -11.249999999999993], [-19.485571585149874, -11.249999999999993], [-19.222936065662587, -11.5355801942788], [-18.824965599056643, -11.733690777499536], [-18.31579089986321, -11.850479345379583], [-17.728960274195803, -11.900331488599353], [-17.102847757267053, -11.903933363504311], [-16.47561098422762, -11.885405812744914], [-15.88047622608984, -11.868962147056427], [-15.34205120994558, -11.875631600088102], [-14.8741778791377, -11.920588876896984], [-14.479570886675388, -12.011534765393039], [-14.151189359029635, -12.148397586243055], [-13.875009611526748, -12.324398892047514], [-13.633651085748893, -12.528287670458266], [-13.410190953584774, -12.747337043500774], [-13.191501335475353, -12.970553823912683], [-12.970553823912693, -13.191501335475342], [-12.747337043500785, -13.410190953584765], [-12.528287670458283, -13.633651085748879], [-12.32439889204753, -13.875009611526734], [-12.148397586243073, -14.151189359029622], [-12.011534765393058, -14.479570886675376], [-11.920588876897002, -14.874177879137687], [-11.875631600088122, -15.342051209945566], [-11.868962147056433, -15.880476226089836], [-11.885405812744919, -16.475610984227618], [-11.903933363504322, -17.10284775726704], [-11.900331488599367, -17.728960274195792], [-11.850479345379595, -18.315790899863202], [-11.73369077749955, -18.824965599056636], [-11.535580194278817, -19.22293606566258], [-11.25000000000001, -19.485571585149867], [-11.25000000000001, -19.485571585149867], [-10.879760871048475, -19.601573528469377], [-10.436053045401431, -19.5741570929941], [-9.936700536995579, -19.420711610053115], [-9.403564235839017, -19.170469519680825], [-8.859533953098811, -18.860532576385403], [-8.325594748838613, -18.530868860238133], [-7.818414762460413, -18.21906084895168], [-7.348790293930601, -17.95562425663433], [-6.921121465293296, -17.76062173503185], [-6.5339088410619315, -17.642079688608025], [-6.181090685562158, -17.596415604474863], [-5.853911355311657, -17.61074733264931], [-5.542944351362705, -17.66664093141067], [-5.239897513654296, -17.744613187066477], [-4.938898358621658, -17.828579780399455], [-4.637078444924115, -17.90945218253434], [-4.334422233481713, -17.98723455715507], [-4.0329898456618025, -18.071232021820965], [-3.73573772112258, -18.17831024735917], [-3.4452262454452574, -18.329488271805214], [-3.1625088019326526, -18.545443606454974], [-2.886443855894182, -18.84171034219028], [-2.613573046688766, -19.224421894018707], [-2.338584622861858, -19.687376909516843], [-2.0552578760105362, -20.211000561583514], [-1.757684819118374, -20.763467316603126], [-1.441509245485053, -21.303895724438366], [-1.1049207101899274, -21.787179882375174], [-0.7491914939374887, -22.169743822900962], [-0.37863746280678945, -22.415341065327294], [-4.133182947122317e-15, -22.5], [-4.133182947122317e-15, -22.5], [0.3786374628067812, -22.415341065327294], [0.7491914939374609, -22.169743822900962], [1.1049207101899001, -21.787179882375177], [1.4415092454850265, -21.303895724438366], [1.7576848191183483, -20.763467316603133], [2.055257876010511, -20.211000561583518], [2.338584622861851, -19.687376909516843], [2.613573046688742, -19.224421894018707], [2.8864438558941585, -18.841710342190282], [3.1625088019326295, -18.545443606454977], [3.4452262454452343, -18.329488271805218], [3.7357377211225575, -18.178310247359178], [4.03298984566178, -18.07123202182097], [4.334422233481706, -17.98723455715507], [4.637078444924093, -17.909452182534345], [4.9388983586216515, -17.828579780399455], [5.239897513654274, -17.744613187066484], [5.542944351362682, -17.666640931410676], [5.853911355311634, -17.610747332649318], [6.181090685562137, -17.596415604474867], [6.533908841061925, -17.642079688608028], [6.9211214652932735, -17.76062173503186], [7.348790293930594, -17.955624256634334], [7.818414762460391, -18.219060848951692], [8.32559474883859, -18.530868860238144], [8.859533953098785, -18.86053257638541], [9.403564235838994, -19.170469519680836], [9.936700536995572, -19.420711610053118], [10.436053045401406, -19.574157092994113], [10.879760871048486, -19.60157352846937], [11.249999999999986, -19.485571585149877], [11.249999999999986, -19.485571585149877], [11.535580194278808, -19.222936065662584], [11.733690777499525, -18.82496559905665], [11.850479345379588, -18.315790899863206], [11.90033148859936, -17.728960274195796], [11.903933363504319, -17.102847757267046], [11.885405812744914, -16.47561098422762], [11.868962147056425, -15.88047622608984], [11.875631600088102, -15.34205120994558], [11.920588876896982, -14.8741778791377], [12.011534765393039, -14.47957088667539], [12.148397586243066, -14.151189359029624], [12.324398892047514, -13.875009611526748], [12.528287670458273, -13.63365108574889], [12.74733704350077, -13.410190953584781], [12.970553823912681, -13.191501335475353], [13.191501335475337, -12.970553823912699], [13.410190953584765, -12.747337043500785], [13.633651085748872, -12.528287670458289], [13.875009611526732, -12.324398892047531], [14.151189359029619, -12.148397586243073], [14.479570886675374, -12.011534765393058], [14.874177879137687, -11.920588876897003], [15.342051209945566, -11.875631600088122], [15.880476226089824, -11.868962147056447], [16.475610984227608, -11.885405812744935], [17.10284775726703, -11.903933363504338], [17.728960274195792, -11.900331488599367], [18.31579089986319, -11.850479345379613], [18.824965599056632, -11.73369077749955], [19.22293606566258, -11.535580194278818], [19.485571585149863, -11.25000000000001], [19.485571585149863, -11.25000000000001], [19.601573528469366, -10.879760871048495], [19.5741570929941, -10.436053045401433], [19.420711610053115, -9.93670053699558], [19.17046951968082, -9.403564235839019], [18.860532576385403, -8.859533953098811], [18.530868860238133, -8.325594748838615], [18.21906084895168, -7.818414762460414], [17.955624256634323, -7.348790293930618], [17.76062173503185, -6.921121465293297], [17.642079688608025, -6.533908841061932], [17.59641560447486, -6.18109068556216], [17.61074733264931, -5.8539113553116575], [17.66664093141067, -5.5429443513627055], [17.744613187066477, -5.239897513654298], [17.828579780399448, -4.9388983586216755], [17.90945218253434, -4.637078444924116], [17.987234557155066, -4.334422233481714], [18.071232021820965, -4.032989845661804], [18.17831024735917, -3.735737721122581], [18.329488271805214, -3.4452262454452582], [18.545443606454974, -3.162508801932654], [18.84171034219028, -2.8864438558941834], [19.224421894018707, -2.613573046688767], [19.687376909516843, -2.3385846228618594], [20.211000561583514, -2.055257876010538], [20.763467316603126, -1.7576848191183752], [21.303895724438362, -1.4415092454850544], [21.787179882375174, -1.1049207101899288], [22.169743822900962, -0.7491914939374901], [22.415341065327294, -0.37863746280679084], [22.5, -5.5109105961630896e-15]]);
	}
	translate(v = [0, 0, -0.1000000000]) {
		difference() {
			cylinder(h = 12, r = 3.2000000000);
			translate(v = [1.6000000000, -3.2000000000, 0]) {
				cube(size = [6.4000000000, 6.4000000000, 12]);
			}
		}
	}
}
/***********************************************
*********      SolidPython code:      **********
************************************************
 
import numpy as np
from solid import *
from solid.utils import *

z = 0.1
z2 = 0.2

t = translate
r = rotate
sc = scale
cos = np.cos
sin = np.sin
pi = np.pi
save = lambda m, n: scad_render_to_file(m, n, file_header='$fn = 64;')

# Parameters
ro_gear = 45 / 2 # Outer radius of gear
d_teeth = 4 # Depth of teeth
ri_gear = ro_gear - d_teeth # Inner radius of gear
d_gear = 13 # Depth of gear
n_gear = 12 # Teeth count
r_gear_mount = 6.4 / 2 # Radius of gear mount hole
d_gear_mount = 12 # Depth of gear mount
c_gear_mount = 1.6 # Gear mount cut depth from center
gear_offset = 40 # Offset of gear from rail tangent (affects twist of gear teeth)

ro_rail = 300 # Outer radius from hinge to rail
d_rail = d_gear # Depth of rail
ri_rail = ro_rail - d_rail # Inner radius from hinge to rail
a_rail = 38 # Angle of rail
h_rail = 10 # Height of rail
n_rail = n_gear * ro_rail / ro_gear


def trail_pattern(p):
  return cos(p * pi) ** 4


def create_rail():
  points = []
  faces = []

  for i, a in enumerate(np.linspace(0, a_rail / 180 * pi, 512)):
    ri = ri_rail
    ro = ro_rail
    x = cos(a)
    y = sin(a)
    progress = a / (pi * 2) * n_rail
    z = h_rail + (1 - trail_pattern(progress)) * d_teeth
    points.append([x * ri, y * ri, 0])
    points.append([x * ro, y * ro, 0])
    points.append([x * ri, y * ri, z])
    points.append([x * ro, y * ro, z])
    p1 = 4 * i
    p2 = 4 * (i + 1)
    faces.append([p1 + 0, p1 + 1, p2 + 1, p2 + 0])
    faces.append([p1 + 1, p1 + 3, p2 + 3, p2 + 1])
    faces.append([p2 + 0, p2 + 2, p1 + 2, p1 + 0])
    faces.append([p2 + 2, p2 + 3, p1 + 3, p1 + 2])

  faces.append([2, 3, 1, 0])
  lp = len(points)
  faces.append([lp - 4, lp - 3, lp - 1, lp - 2])

  min_x = min(p[0] for p in points)
  max_x = max(p[0] for p in points)
  min_y = min(p[1] for p in points)
  max_y = max(p[1] for p in points)
  center = [-(min_x + max_x) / 2, -(min_y + max_y) / 2, 0]

  return t(center)(polyhedron(points=points, faces=faces))


def create_gear():
  points = []

  for i in range(n_gear):
    da = 2 * pi / n_gear # Delta angle
    for progress in np.linspace(0, 1, 32):
      r = ri_gear + trail_pattern(progress) * d_teeth
      a = (i + progress) * da
      x = r * cos(a)
      y = r * sin(a)
      points.append([x, y])

  cut = cube([2 * r_gear_mount, 2 * r_gear_mount, d_gear_mount])
  cut = t([c_gear_mount, -r_gear_mount, 0])(cut)
  hole = cylinder(r=r_gear_mount, h=d_gear_mount) - cut
  hole = t([0, 0, -z])(hole)

  offset_twist = np.atan2(-gear_offset, ro_rail) * 180 / pi

  return linear_extrude(height=d_gear, slices=1, twist=offset_twist)(polygon(points)) - hole


rail = create_rail()
gear = create_gear()

save(color("red")(t([10, -3.5, ro_gear + h_rail + 1])(r([-6, 90, 0])(gear))) + rail, "automatic-window-opener.assembly.scad")
save(gear, "automatic-window-opener.gear.scad")
save(rail, "automatic-window-opener.rail.scad")
 
 
************************************************/
